<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom Launcher with Sign-In</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background: #222;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  .auth-container {
    background: rgba(0,0,0,0.8);
    padding: 20px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    width: 300px;
    gap: 10px;
  }
  .auth-container input {
    padding: 8px;
    border-radius: 5px;
    border: none;
    outline: none;
  }
  .auth-container button {
    padding: 8px;
    border-radius: 5px;
    border: none;
    cursor: pointer;
    background: #0b122b;
    color: white;
  }
  #launcher-apps {
    display: none;
  }
  .desktop-icon {
      width: 100px;
      height: 100px;
      margin: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      cursor: pointer;
      border-radius: 10px;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(5px);
      text-align: center;
      position: absolute;
  }
  .desktop-icon img {
      max-width: 70px;
      max-height: 70px;
  }
  .desktop-icon span {
      margin-top: 5px;
      color: white;
      font-size: 14px;
  }
</style>
</head>
<body>

<div id="auth-page" class="auth-container">
  <h2>Sign In</h2>
  <input type="text" id="signin-username" placeholder="Username">
  <input type="password" id="signin-password" placeholder="Password">
  <button id="signin-btn">Sign In</button>
  <p>Or <span id="show-signup" style="color:yellow; cursor:pointer;">Sign Up</span></p>
</div>

<div id="signup-page" class="auth-container" style="display:none;">
  <h2>Sign Up</h2>
  <input type="text" id="signup-username" placeholder="Username">
  <input type="password" id="signup-password" placeholder="Password">
  <button id="signup-btn">Sign Up</button>
  <p>Already have an account? <span id="show-signin" style="color:yellow; cursor:pointer;">Sign In</span></p>
</div>

<div id="launcher-apps">
  <div class="desktop-icon" id="granny-icon" style="top:50px; left:50px;">
    <img src="granny-logo.png" alt="Granny Game">
    <span>Granny</span>
  </div>
</div>

<script>
  const authPage = document.getElementById('auth-page');
  const signupPage = document.getElementById('signup-page');
  const launcherApps = document.getElementById('launcher-apps');

  const showSignup = document.getElementById('show-signup');
  const showSignin = document.getElementById('show-signin');
  const signupBtn = document.getElementById('signup-btn');
  const signinBtn = document.getElementById('signin-btn');

  showSignup.addEventListener('click', () => {
    authPage.style.display = 'none';
    signupPage.style.display = 'flex';
  });

  showSignin.addEventListener('click', () => {
    signupPage.style.display = 'none';
    authPage.style.display = 'flex';
  });

  function saveUserData(username, data) {
    localStorage.setItem('user_'+username, JSON.stringify(data));
  }

  function getUserData(username) {
    const data = localStorage.getItem('user_'+username);
    return data ? JSON.parse(data) : null;
  }

  signupBtn.addEventListener('click', () => {
    const username = document.getElementById('signup-username').value;
    const password = document.getElementById('signup-password').value;
    if (!username || !password) return alert('Fill in all fields');

    if (getUserData(username)) {
      return alert('Username exists');
    }

    const data = { password, wallpaper: 'wallpaper.jpg', icons: { granny: { top:50, left:50 } } };
    saveUserData(username, data);
    alert('Account created!');
    signupPage.style.display='none';
    launcherApps.style.display='block';
    applyUserData(data);
  });

  signinBtn.addEventListener('click', () => {
    const username = document.getElementById('signin-username').value;
    const password = document.getElementById('signin-password').value;
    const userData = getUserData(username);
    if (!userData) return alert('User not found');
    if (userData.password !== password) return alert('Wrong password');

    authPage.style.display='none';
    launcherApps.style.display='block';
    applyUserData(userData);
  });

  function applyUserData(data){
    document.body.style.background = `url('${data.wallpaper}') center/cover no-repeat`;
    const grannyIcon = document.getElementById('granny-icon');
    if(data.icons && data.icons.granny){
      grannyIcon.style.top = data.icons.granny.top+'px';
      grannyIcon.style.left = data.icons.granny.left+'px';
    }
  }

  // Drag desktop icon
  const grannyIcon = document.getElementById('granny-icon');
  let drag = false, offsetX, offsetY;
  grannyIcon.addEventListener('mousedown', e => {
    drag = true;
    offsetX = e.clientX - grannyIcon.offsetLeft;
    offsetY = e.clientY - grannyIcon.offsetTop;
  });
  document.addEventListener('mousemove', e => {
    if(drag){
      grannyIcon.style.left = e.clientX - offsetX + 'px';
      grannyIcon.style.top = e.clientY - offsetY + 'px';
    }
  });
  document.addEventListener('mouseup', () => {
    if(drag){
      drag=false;
      const username = document.getElementById('signin-username').value || document.getElementById('signup-username').value;
      const data = getUserData(username);
      data.icons.granny = { top: parseInt(grannyIcon.style.top), left: parseInt(grannyIcon.style.left) };
      saveUserData(username, data);
    }
  });

  // Click icon to launch (for now just alert)
  grannyIcon.addEventListener('dblclick', () => {
    alert('Launch Granny Game here');
  });
</script>
</body>
</html>
